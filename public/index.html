<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>3번 도구 · 코딩 기초 연습 도구 · WIC 자동화 시스템2</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<style>
  :root {
    --bg: #f4f7ff;
    --panel: #ffffff;
    --border: #d7dff0;
    --accent: #2563eb;
    --accent-soft: rgba(37, 99, 235, 0.08);
    --text: #111827;
    --muted: #6b7280;
    --radius: 14px;
    --shadow: 0 6px 16px rgba(30, 41, 59, 0.08);
  }

  body {
    margin: 0;
    padding: 0;
    font-family: system-ui, sans-serif;
    background: var(--bg);
    color: var(--text);
  }

  .app {
    max-width: 1200px;
    margin: 18px auto 30px;
    padding: 0 14px;
  }

  header {
    background: linear-gradient(135deg, #eef3ff, #ffffff);
    padding: 16px 18px;
    border-radius: 20px;
    border: 1px solid var(--border);
    box-shadow: var(--shadow);
  }

  header h1 {
    margin: 0;
    font-size: 18px;
    font-weight: 700;
  }

  header p {
    margin: 4px 0 0;
    font-size: 12px;
    color: var(--muted);
  }

  .grid {
    margin-top: 18px;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 14px;
  }

  @media (max-width: 900px) {
    .grid {
      grid-template-columns: 1fr;
    }
  }

  .card {
    background: var(--panel);
    border-radius: var(--radius);
    border: 1px solid var(--border);
    padding: 14px;
    box-shadow: var(--shadow);
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  .card-title {
    font-size: 14px;
    font-weight: 600;
    margin-bottom: 4px;
  }

  textarea {
    width: 100%;
    height: 260px;
    resize: vertical;
    padding: 10px;
    border-radius: var(--radius);
    border: 1px solid var(--border);
    font-size: 13px;
    font-family: Consolas, monospace;
    background: #fdfdff;
  }

  .btn {
    padding: 7px 12px;
    border-radius: 999px;
    border: none;
    cursor: pointer;
    font-size: 13px;
    background: var(--accent);
    color: white;
  }

  .btn:hover {
    background: #1e4ed8;
  }

  .output-box {
    border: 1px solid var(--border);
    border-radius: var(--radius);
    background: #fafcff;
    padding: 10px;
    min-height: 260px;
    white-space: pre-wrap;
    font-family: Consolas, monospace;
    font-size: 13px;
    overflow-y: auto;
  }

  .status {
    margin-top: 6px;
    font-size: 12px;
    color: var(--muted);
  }
</style>
</head>

<body>
<div class="app">

  <header>
    <h1>3번 도구 · 코딩 기초 연습 도구</h1>
    <p>코드를 직접 입력하고 실행해보는 WIC 기본 연습 모듈</p>
  </header>

  <div class="grid">

    <!-- LEFT: 코드 입력 -->
    <section class="card">
      <div class="card-title">코드 입력 (JavaScript)</div>
      <textarea id="codeInput" placeholder="여기에 JavaScript 코드를 입력하세요.&#10;예: &#10;const x = 10; &#10;console.log(x * 2);"></textarea>

      <button class="btn" id="runBtn">코드 실행</button>
      <div class="status">* 화면에 보이는 기능만 동작합니다. localStorage 자동 저장.</div>
    </section>

    <!-- RIGHT: 결과 출력 -->
    <section class="card">
      <div class="card-title">실행 결과</div>
      <div id="outputBox" class="output-box">여기에 실행 결과가 표시됩니다.</div>
      <div class="status">에러 발생 시 자동 표시됩니다.</div>
    </section>

  </div>
</div>

<script>
(function () {
  "use strict";

  const codeInput = document.getElementById("codeInput");
  const outputBox = document.getElementById("outputBox");
  const runBtn = document.getElementById("runBtn");

  const STORAGE_KEY = "wic_coding_practice_v1";

  function loadSaved() {
    try {
      const saved = localStorage.getItem(STORAGE_KEY);
      if (saved) codeInput.value = saved;
    } catch (_) {}
  }

  function saveCode() {
    try {
      localStorage.setItem(STORAGE_KEY, codeInput.value);
    } catch (_) {}
  }

  function runCode() {
    const userCode = codeInput.value || "";
    saveCode();

    outputBox.textContent = "실행 중...\n";

    try {
      const captured = [];
      const fakeConsole = {
        log: function (...args) {
          captured.push(args.join(" "));
        }
      };

      const wrapped = new Function("console", userCode);
      wrapped(fakeConsole);

      outputBox.textContent =
        captured.length > 0 ? captured.join("\n") : "(출력값 없음)";
    } catch (e) {
      outputBox.textContent = "⚠ 오류 발생:\n" + e.message;
    }
  }

  runBtn.addEventListener("click", runCode);
  codeInput.addEventListener("input", saveCode);

  loadSaved();
})();
</script>

</body>
</html>

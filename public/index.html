<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>3번 도구 · 코딩 기초 연습 도구</title>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #0f172a;
      color: #e5e7eb;
    }
    .app {
      max-width: 1120px;
      margin: 24px auto;
      padding: 16px 20px 24px;
      background: #020617;
      border-radius: 16px;
      border: 1px solid #1e293b;
      box-shadow: 0 10px 30px rgba(15,23,42,0.6);
    }
    .badge {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 999px;
      background: #1e293b;
      font-size: 11px;
      color: #e5e7eb;
      margin-bottom: 6px;
    }
    h1 {
      font-size: 18px;
      margin: 0 0 4px 0;
    }
    .subtitle {
      font-size: 13px;
      color: #9ca3af;
      margin-bottom: 10px;
    }
    .top-row {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 10px;
    }
    .top-card {
      flex: 1 1 260px;
      min-width: 0;
      background: #020617;
      border-radius: 12px;
      border: 1px solid #1f2937;
      padding: 10px;
    }
    .top-title {
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 4px;
    }
    .top-text {
      font-size: 12px;
      color: #9ca3af;
      line-height: 1.5;
    }
    .goal-list {
      font-size: 12px;
      margin: 4px 0 0 0;
      padding-left: 14px;
      color: #d1d5db;
    }
    .goal-list li {
      margin-bottom: 2px;
    }
    .layout {
      display: flex;
      flex-wrap: wrap;
      gap: 16px;
      margin-top: 8px;
    }
    .panel {
      flex: 1 1 320px;
      min-width: 0;
      background: #020617;
      border-radius: 12px;
      border: 1px solid #1f2937;
      padding: 10px;
    }
    .panel-title {
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 4px;
    }
    .panel-desc {
      font-size: 11px;
      color: #9ca3af;
      margin-bottom: 6px;
    }
    .steps {
      font-size: 11px;
      color: #9ca3af;
      margin: 6px 0 8px 0;
      padding-left: 16px;
    }
    .steps li {
      margin-bottom: 2px;
    }
    textarea {
      width: 100%;
      min-height: 210px;
      background: #020617;
      color: #e5e7eb;
      border-radius: 8px;
      border: 1px solid #374151;
      padding: 8px 9px;
      font-size: 12px;
      resize: vertical;
      font-family: "Fira Code", Consolas, monospace;
      line-height: 1.4;
    }
    .hint-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 6px;
      align-items: center;
    }
    .hint-label {
      font-size: 11px;
      color: #9ca3af;
      margin-right: 4px;
    }
    button {
      border: none;
      cursor: pointer;
      border-radius: 999px;
      font-size: 11px;
      padding: 5px 9px;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      white-space: nowrap;
    }
    .btn-main {
      background: #2563eb;
      color: #f9fafb;
      font-size: 13px;
      padding: 7px 14px;
      border-radius: 999px;
    }
    .btn-main:hover { background: #1d4ed8; }
    .btn-ghost {
      background: #111827;
      color: #e5e7eb;
      border: 1px solid #374151;
    }
    .btn-ghost:hover { background: #020617; }
    .btn-chip {
      background: #111827;
      color: #e5e7eb;
      border: 1px solid #374151;
    }
    .btn-chip:hover { background: #0b1120; }
    .btn-chip span.key {
      font-family: "Fira Code", Consolas, monospace;
      font-size: 11px;
    }
    .run-bar {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
      margin-top: 8px;
    }
    .run-note {
      font-size: 11px;
      color: #9ca3af;
    }
    .output-box {
      background: #020617;
      border-radius: 8px;
      border: 1px solid #374151;
      padding: 8px 9px;
      font-size: 12px;
      font-family: "Fira Code", Consolas, monospace;
      white-space: pre-wrap;
      line-height: 1.4;
      min-height: 160px;
    }
    .output-label {
      font-size: 11px;
      color: #9ca3af;
      margin-bottom: 4px;
    }
    .output-ok { color: #a5f3fc; }
    .output-err { color: #fecaca; }
    .motivation {
      font-size: 11px;
      color: #bbf7d0;
      margin-top: 6px;
    }
    .motion-box {
      margin-top: 6px;
      border-radius: 8px;
      border: 1px dashed #4b5563;
      padding: 8px;
      font-size: 11px;
      color: #9ca3af;
      background: #020617;
      text-align: center;
    }
    .motion-title {
      font-weight: 600;
      font-size: 11px;
      margin-bottom: 2px;
      color: #e5e7eb;
    }
    footer {
      margin-top: 10px;
      font-size: 10px;
      color: #6b7280;
      text-align: right;
    }
    @media (max-width: 720px) {
      .app { margin: 10px; padding: 12px 12px 16px; }
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="badge">3번 도구 · 코딩 기초 연습 도구</div>
    <h1>코드를 직접 입력하고 실행해보는 WIC 기본 연습 모듈</h1>
    <div class="subtitle">
      아주 작은 JavaScript 코드 조각을 직접 입력·수정해 보면서,
      <strong>실행 결과를 눈으로 확인하는 연습</strong>을 하는 도구입니다.
    </div>

    <!-- 상단: 도구 설명 + 오늘 목표 + 모션 안내 -->
    <div class="top-row">
      <div class="top-card">
        <div class="top-title">도구 설명</div>
        <div class="top-text">
          이 도구는 WIC에서 실제로 쓰는 코드와 비슷한 형태로,
          <strong>작은 코드부터 한 줄씩 만져보는 연습</strong>을 돕습니다.<br />
          예제 버튼을 눌러서 시작한 뒤, 코드를 조금씩 바꾸고
          오른쪽 결과창을 보면서 감각을 익힙니다.
        </div>
      </div>
      <div class="top-card">
        <div class="top-title">오늘 목표 (예시)</div>
        <ul class="goal-list">
          <li>1) 기본 예제를 한 번 실행해 본다.</li>
          <li>2) 숫자나 글자를 <strong>한 줄만</strong> 바꿔 본다.</li>
          <li>3) <code>console.log</code> 결과가 어떻게 달라지는지 본다.</li>
        </ul>
      </div>
      <div class="top-card">
        <div class="top-title">모션 가이드 자리</div>
        <div class="top-text">
          아래 박스는 나중에 <strong>모션 이미지(GIF)</strong>나
          짧은 영상이 들어갈 자리입니다.<br />
          “예제 불러오기 → 코드 수정 → 실행” 흐름을
          눈으로 보여주는 간단한 움직이는 그림을 넣으면 됩니다.
        </div>
        <div class="motion-box">
          <div class="motion-title">[모션 이미지 자리]</div>
          예: 예제 버튼을 누르고, 코드 한 줄을 바꾸고,<br />
          실행 버튼을 누르는 과정을 보여주는 GIF를 넣으세요.
        </div>
      </div>
    </div>

    <!-- 메인 레이아웃 -->
    <div class="layout">
      <!-- 왼쪽: 코드 입력 / 예제 / 사용 방법 -->
      <div class="panel">
        <div class="panel-title">① 코드 입력 (JavaScript)</div>
        <div class="panel-desc">
          이 영역에서 코드를 직접 수정합니다.<br />
          처음에는 아래 단계대로만 따라가면 됩니다.
        </div>
        <ul class="steps">
          <li>1단계: 아래 <strong>예제 코드 불러오기</strong> 버튼 중 하나를 누른다.</li>
          <li>2단계: 숫자, 글자, 메시지 중 한 줄만 바꿔 본다.</li>
          <li>3단계: 아래 <strong>코드 실행</strong> 버튼을 눌러 결과를 확인한다.</li>
        </ul>

        <textarea
          id="code-input"
          placeholder="예:
const x = 10;
const y = 2;
console.log('x * y =', x * y);"
        ></textarea>

        <div class="hint-row">
          <span class="hint-label">예제 코드 불러오기:</span>
          <button class="btn-ghost" type="button" data-example="basic">기본 예제</button>
          <button class="btn-ghost" type="button" data-example="string">문자 예제</button>
          <button class="btn-ghost" type="button" data-example="if">if 조건 예제</button>
        </div>

        <div class="hint-row" style="margin-top: 6px;">
          <span class="hint-label">기초 코딩 단어 넣기:</span>
          <button class="btn-chip" type="button" data-snippet="function "><span class="key">function</span></button>
          <button class="btn-chip" type="button" data-snippet="const "><span class="key">const</span></button>
          <button class="btn-chip" type="button" data-snippet="let "><span class="key">let</span></button>
          <button class="btn-chip" type="button" data-snippet="if () {\n\n}\n"><span class="key">if ( ) { }</span></button>
          <button class="btn-chip" type="button" data-snippet="console.log();"><span class="key">console.log()</span></button>
        </div>

        <div class="run-bar">
          <button id="run-btn" class="btn-main" type="button">코드 실행</button>
          <span class="run-note">
            * 화면에 보이는 기능만 동작합니다. 코드 내용은 localStorage에 자동 저장됩니다.
          </span>
        </div>
      </div>

      <!-- 오른쪽: 실행 결과 / 메시지 / 모션 안내 -->
      <div class="panel">
        <div class="panel-title">② 실행 결과</div>
        <div class="panel-desc">
          <code>console.log(...)</code> 로 출력된 내용이 아래에 순서대로 표시됩니다.<br />
          에러가 있으면 빨간색으로 자동 표시됩니다.
        </div>
        <div class="output-label">콘솔 출력 / 오류 메시지</div>
        <div id="output" class="output-box">
여기에 실행 결과가 표시됩니다.
에러 발생 시 자동 표시됩니다.
        </div>
        <div class="motivation" id="motivation-text">
          오늘의 작은 미션: 예제 하나를 실행하고, 숫자나 글자를 한 번만 바꿔 보세요.
        </div>
        <div class="motion-box">
          <div class="motion-title">[실행 모션 이미지 자리]</div>
          예: 코드 실행 전/후 화면을 비교해서 보여주는 GIF를 넣을 수 있습니다.
        </div>
      </div>
    </div>

    <footer>
      코딩 기초 연습 · 작은 코드 조각부터 하나씩 실행해 보며 감각을 익히는 단계
    </footer>
  </div>

  <script>
    (function () {
      const codeInput = document.getElementById("code-input");
      const runBtn = document.getElementById("run-btn");
      const outputBox = document.getElementById("output");
      const exampleButtons = document.querySelectorAll("button[data-example]");
      const snippetButtons = document.querySelectorAll("button[data-snippet]");
      const motivationText = document.getElementById("motivation-text");
      const STORAGE_KEY = "wic_coding_basic_code_v1";

      // 기본 예제들
      const examples = {
        basic: [
          "const x = 10;",
          "const y = 2;",
          "console.log('x * y =', x * y);"
        ].join("\\n"),
        string: [
          "const name = 'WIC';",
          "console.log('안녕하세요,', name, '입니다.');"
        ].join("\\n"),
        if: [
          "const value = 7;",
          "if (value > 5) {",
          "  console.log('5보다 큽니다.');",
          "} else {",
          "  console.log('5보다 크지 않습니다.');",
          "}"
        ].join("\\n")
      };

      // localStorage 복원
      try {
        const saved = localStorage.getItem(STORAGE_KEY);
        if (saved && saved.trim() !== "") {
          codeInput.value = saved;
        } else {
          codeInput.value = examples.basic;
        }
      } catch (e) {
        codeInput.value = examples.basic;
      }

      // 코드 자동 저장
      codeInput.addEventListener("input", () => {
        try {
          localStorage.setItem(STORAGE_KEY, codeInput.value);
        } catch (e) {
          /* 무시 */
        }
      });

      // 예제 버튼
      exampleButtons.forEach((btn) => {
        btn.addEventListener("click", () => {
          const key = btn.getAttribute("data-example");
          const ex = examples[key];
          if (ex) {
            codeInput.value = ex;
            try {
              localStorage.setItem(STORAGE_KEY, ex);
            } catch (e) {}
            motivationText.textContent =
              "좋습니다. 이제 숫자나 메시지를 한 줄만 바꿔 보고, 아래 [코드 실행]을 눌러 보세요.";
          }
        });
      });

      // 스니펫 버튼
      snippetButtons.forEach((btn) => {
        btn.addEventListener("click", () => {
          const snippet = btn.getAttribute("data-snippet") || "";
          const start = codeInput.selectionStart;
          const end = codeInput.selectionEnd;
          const text = codeInput.value;
          codeInput.value = text.slice(0, start) + snippet + text.slice(end);
          const cursorPos = start + snippet.length;
          codeInput.selectionStart = codeInput.selectionEnd = cursorPos;
          codeInput.focus();
          try {
            localStorage.setItem(STORAGE_KEY, codeInput.value);
          } catch (e) {}
        });
      });

      // 코드 실행
      runBtn.addEventListener("click", () => {
        const userCode = codeInput.value;
        if (!userCode.trim()) {
          outputBox.textContent =
            "코드가 비어 있습니다. 예제 불러오기를 먼저 눌러보세요.";
          outputBox.classList.remove("output-err");
          outputBox.classList.add("output-ok");
          motivationText.textContent =
            "먼저 예제 버튼을 눌러 코드 한 덩어리를 만들어 주세요.";
          return;
        }

        let logs = [];
        const fakeConsole = {
          log: (...args) => {
            logs.push(args.join(" "));
          }
        };

        try {
          const fn = new Function("console", userCode);
          fn(fakeConsole);

          if (logs.length === 0) {
            outputBox.textContent =
              "실행 완료: console.log(...) 출력이 없습니다.";
          } else {
            outputBox.textContent = logs.join("\\n");
          }
          outputBox.classList.remove("output-err");
          outputBox.classList.add("output-ok");
          motivationText.textContent =
            "잘 되었습니다. 내일은 if 예제나 다른 숫자 조합도 한 번 바꿔 보면 좋습니다.";
        } catch (err) {
          outputBox.textContent = "에러 발생:\\n" + String(err);
          outputBox.classList.remove("output-ok");
          outputBox.classList.add("output-err");
          motivationText.textContent =
            "에러가 나도 괜찮습니다. 한 줄씩 다시 읽어 보면서 어디가 다른지 찾는 연습이 됩니다.";
        }
      });
    })();
  </script>
</body>
</html>
